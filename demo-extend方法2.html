<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$("div").css('color', 'red') 的封装</title>
</head>
<body>
  <div>111</div>
  <div>222</div>
  <div>333</div>
  <div class="head">head</div>
   <script>
     (function(global){
       function jQuery(selector) {
         return new jQuery.prototype.init(selector)
       }

       //  给jQuery添加了一个fn属性，fn属性等价于jQuery.prototype
       jQuery.fn = jQuery.prototype = {
         constructor: jQuery,
         init: function(selector) {
          //把dom元素放到对象中
          const elements = document.querySelectorAll(selector);
          for(let i=0;i<elements.length;i++) {
            var ele = elements[i];
            this[i] = ele;
          }
          this.length = elements.length;
        },
         // 此时css方法还是雏形，后续完善
         css(name,value) {
           for(let i=0;i<this.length;i++) {
             let element = this[i];
             element.style[name]=value;
           }
         }
       }

       // 此时创建的jquery是init构造函数的实例
         // css方法在jquery.prototype对象中
         // ---为了让jquery对象可以访问到css方法
         // 让init的原型继承自jQuery.prototype
         jQuery.fn.init.prototype = jQuery.prototype;

         jQuery.fn.extend = jQuery.extend = function(...args) {
          // 2个extend方法区别在于
          // 1. 接收数据的对象发生了变化
           // ---> $.extend: 第一个实参
           // ---> $.fn.extend: ( $.fn )--> this
          // 2. 提供数据的对象发生了变化
            // -->　$.extend:  第二个参数及其后面的参数
            // --> $.fn.extend: 所以参数
          
            // 后面的拷贝过程都是一样的
            let target, source=[];
            // 判断2种情况 判断还可以写arguments.length == 1
            source = [...args];

            // 参数个数大于1，给第一个实参添加属性

            if(args.length === 1) {
              // $.extend
              target = this;
              
            } else { // 参数个数》1
              // $.fn.extend
              target = args[i];
              source.splice(0,1);
            }

            source.forEach((item, index)=>{
              // item: 就是每个数据源对象
              // Object.assign(target,item); 拷贝赋值,target 为目标对象，item为要拷贝如目标对象的参数 Object.assign支持多个参数 
              //取出对象中每个属性 Object.keys().forEach()
              // Object.keys(item).forEach((key)=>{
              //   target[key] = item[key];
              // })
              Object.assign(target, item);
            })
            // 1.Object.assign其实是支持多参数
            // 2.优化的思路 Object.assign(target, item[1],item[2], ...)   =====> Object.assign(target, ...item)
            Object.assign(target, ...source);

            return target;
         }
         

       global.$ = global.jQuery = jQuery;
     })(window)

     $("div").css('color', 'blue');
     $(".head").css('color', 'red');
     // jquery第二个extend方法 $.fn.extend 这是编写jquery插件的核心写法
     $.fn.extend({
       dateTimePicker(){

       },
       getDate(){}
     })
   </script>
</body>
</html>